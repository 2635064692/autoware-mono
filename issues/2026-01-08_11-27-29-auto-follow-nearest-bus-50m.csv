"id","priority","phase","area","title","description","acceptance_criteria","test_mcp","review_initial_requirements","review_regression_requirements","dev_state","review_initial_state","review_regression_state","git_state","owner","refs","notes"
"AFBUS50M-000","P0","1","backend","对齐自动 goal 注入入口","确认 planning_simulator/RViz 手动设置目标点实际使用的 topic/service 与消息类型，形成自动发布的接口约束。","在文档中明确目标入口（topic/service 名称、消息类型、关键 QoS/频率建议）；提供可复现命令（ros2 topic info/ros2 service type）；验证手动设置 goal 与自动发布复用同一入口且无需改动 mission_planner。","AUTOE2E","优先复用既有链路；若必须调用 service，处理超时/重试与节流；保证默认关闭时无副作用。","关闭自动模式后手动 goal 行为不变；无 DummyObject/无定位等异常条件下不崩溃且不刷屏。","已完成","已完成","已完成","已提交","","plan/2026-01-08_11-22-40-auto-follow-nearest-bus-50m.md:16;docs/vehicle_following_scenario_task.md:159;src/launcher/autoware_launch/autoware_launch/rviz/autoware.rviz:4187;src/core/autoware_core/api/autoware_adapi_adaptors/src/routing_adaptor.cpp:24;src/universe/autoware_universe/launch/tier4_autoware_api_launch/launch/autoware_api.launch.xml:21","picked_reason:P0 且为后续自动发布入口对齐的前置;done_at:2026-01-08;validation_limited:未在本环境启动 planning_simulator/ROS2 执行 ros2 topic/service 命令验证;manual_test:ros2 launch autoware_launch planning_simulator.launch.xml map_path:=... vehicle_model:=... sensor_model:=...; ros2 topic info -v /planning/mission_planning/goal; ros2 service type /api/routing/set_route_points; ros2 service type /api/routing/clear_route;evidence:更新 docs 并以代码静态链路确认 RViz SetGoal->/planning/mission_planning/goal 且 routing_adaptor_node 订阅并调用 /api/routing/*;risk:low 文档变更无运行时影响"
"AFBUS50M-010","P0","2","backend","实现前方最近 Bus 绑定策略","从 PredictedObjects 与自车状态中筛选“自车前方最近的 Bus”，锁定其 UUID 并在失效条件触发时重选。","参数化筛选条件（BUS、前方判定、纵向距离范围、丢失超时 T）；任意时刻仅锁定 0/1 个目标；对外可观测当前锁定 UUID（日志或 debug 话题，含节流）；提供最小可复现验证（单测或仿真回放）证明“最近前方”选择稳定。","AUTOSERVER","覆盖边界：多 Bus、感知暂失、目标跳变、速度为 0、目标到自车后方；输出含节流避免刷屏；回调线程安全。","无 Bus 时不发布 goal/route 且不崩溃；目标从前方变后方触发重选；默认参数与文档一致。","已完成","已完成","已完成","已提交","","plan/2026-01-08_11-22-40-auto-follow-nearest-bus-50m.md:17;plan/2026-01-08_11-22-40-auto-follow-nearest-bus-50m.md:18;docs/vehicle_following_scenario_task.md:298;src/universe/autoware_universe/planning/autoware_following_goal_publisher/src/target_tracker.cpp:56;src/universe/autoware_universe/planning/autoware_following_goal_publisher/src/target_tracker_node.cpp:52;src/universe/autoware_universe/planning/autoware_following_goal_publisher/test/test_target_tracker.cpp:77","picked_reason:P0 且为后续 goal 生成/发布与节流的前置;done_at:2026-01-08;validation_limited:本环境缺少 colcon/ROS2 构建链路，未实际编译运行;manual_test:colcon build --packages-select autoware_following_goal_publisher --symlink-install && colcon test --packages-select autoware_following_goal_publisher; ros2 run autoware_following_goal_publisher autoware_following_goal_publisher_target_tracker_node;evidence:新增 TargetTracker 锁定逻辑+gtest 覆盖多Bus/暂失/后方重选，节点输出 debug/日志节流;risk:medium 新增包未在本机编译验证"
"AFBUS50M-020","P1","3","backend","生成 Bus 前方 50m 虚拟目标","基于锁定 Bus 的位姿/朝向生成 ahead_distance 的 goal pose，并保留后续接入 lanelet 投影的升级点。","实现 ahead_distance 参数（默认 50.0m）；直线路段 goal 到 Bus 的前向距离误差 < 0.5m；坐标系与时间戳正确；在 heading 不可信/缺失时有明确降级（例如保持上次或使用速度方向）。","AUTOSERVER","防止输出 NaN/inf；明确 frame_id；避免引入 lanelet2 依赖（MVP）；为升级预留接口但不阻塞交付。","弯道/偏航变化大时与节流配合仍稳定（不抖动、不频繁重规划）；禁用自动模式时不影响手动 goal。","已完成","已完成","已完成","已提交","","plan/2026-01-08_11-22-40-auto-follow-nearest-bus-50m.md:22;plan/2026-01-08_11-22-40-auto-follow-nearest-bus-50m.md:23;plan/2026-01-08_11-22-40-auto-follow-nearest-bus-50m.md:24;plan/2026-01-08_11-22-40-auto-follow-nearest-bus-50m.md:41;src/universe/autoware_universe/planning/autoware_following_goal_publisher/src/goal_generator.cpp:44;src/universe/autoware_universe/planning/autoware_following_goal_publisher/test/test_goal_generator.cpp:49","picked_reason:P1 且为后续自动 goal 发布与节流的核心算法;done_at:2026-01-08;validation_limited:本环境缺少 colcon/ROS2 构建链路，未实际编译运行;manual_test:colcon test --packages-select autoware_following_goal_publisher; 在仿真中对比生成 goal 与 bus 前向距离误差 <0.5m;evidence:新增 generate_goal_pose_ahead + 单测覆盖直线精度与 heading 缺失回退;risk:medium 新增代码未在本机编译验证"
"AFBUS50M-030","P0","4","backend","新增自动跟随 goal 发布节点包","新增轻量 ROS2 节点（独立包）周期性向目标入口发布 goal/route 请求，受 enable_auto_follow 开关控制。","新增包可被 colcon 编译；节点默认不发布（enable_auto_follow=false）；启用后以可配置频率运行（默认 2Hz）；入口不可用/调用失败时有清晰错误日志且不崩溃；参数至少覆盖 ahead_distance、target_type、search_range、lost_timeout、update_threshold。","AUTOSERVER","依赖最小化；参数声明与默认值清晰；日志带节流；遵循仓库格式与构建规范。","节点不启动时系统行为完全不变；节点启动但无 Bus 时不产生 route 震荡/CPU 异常。","已完成","已完成","已完成","已提交","","plan/2026-01-08_11-22-40-auto-follow-nearest-bus-50m.md:25;plan/2026-01-08_11-22-40-auto-follow-nearest-bus-50m.md:30;docs/vehicle_following_scenario_task.md:142;src/universe/autoware_universe/planning/autoware_following_goal_publisher/src/following_goal_publisher_node.cpp:38;src/universe/autoware_universe/planning/autoware_following_goal_publisher/CMakeLists.txt:17","picked_reason:P0 新增可控的自动 goal 发布节点以形成最小闭环;done_at:2026-01-08;validation_limited:本环境缺少 colcon/ROS2 构建链路，未实际编译运行;manual_test:colcon build --packages-select autoware_following_goal_publisher --symlink-install && source install/setup.bash && ros2 run autoware_following_goal_publisher autoware_following_goal_publisher_node --ros-args -p enable_auto_follow:=true;evidence:新增 FollowingGoalPublisherNode（默认关闭），启用后按频率向 /planning/mission_planning/goal 发布 PoseStamped 并对无订阅/无目标做节流日志;risk:medium 新增节点未在本机编译验证"
"AFBUS50M-040","P1","5","backend","冲突规避与重规划节流","明确自动模式与手动 goal 的互斥/优先级策略，并加入 goal 更新阈值节流以避免频繁重规划抖动。","实现位置/角度阈值（默认 2m/5deg）与节流策略；自动模式启用时的手动 goal 处理策略有文档说明；仿真中轨迹持续输出且无明显频繁重规划（通过日志/话题观测验证）。","AUTOE2E","阈值/频率可配置；避免饥饿（goal 永不更新）与抖动（过度更新）；冲突场景有告警/日志提示。","enable_auto_follow 切换（开/关）无状态残留；手动 goal 的 RViz 体验不被永久破坏。","已完成","已完成","已完成","已提交","","plan/2026-01-08_11-22-40-auto-follow-nearest-bus-50m.md:26;plan/2026-01-08_11-22-40-auto-follow-nearest-bus-50m.md:27;plan/2026-01-08_11-22-40-auto-follow-nearest-bus-50m.md:28;src/universe/autoware_universe/planning/autoware_following_goal_publisher/src/following_goal_publisher_node.cpp:244;src/universe/autoware_universe/planning/autoware_following_goal_publisher/src/following_goal_publisher_node.cpp:225;docs/vehicle_following_scenario_task.md:169","picked_reason:P1 在形成闭环后补齐抖动/冲突控制以降低重规划噪声;done_at:2026-01-08;validation_limited:未在 planning_simulator 中观测重规划频率与轨迹稳定性;manual_test:启用 enable_auto_follow 后用 ros2 topic echo /planning/mission_planning/goal 与 /planning/trajectory 观测更新频率；调小/调大 update_threshold_* 验证节流效果；在 RViz 同时点 2D Goal Pose 观察告警日志;evidence:FollowingGoalPublisherNode 增加位置/角度阈值节流与多 publisher 冲突告警，文档明确互斥策略;risk:medium 未在仿真回归验证重规划抖动"
"AFBUS50M-050","P0","6","backend","集成到 planning_simulator 启动链路","为 planning_simulator 增加参数并在 launch 中按参数启停自动跟随节点。","新增 launch 参数（enable_auto_follow、ahead_distance、target_type）且默认关闭；launch 能正确传参到节点；提供可直接复制的启动示例命令；不传参时行为与当前版本一致。","AUTOE2E","保持向后兼容；参数命名与现有风格一致；避免改动默认规划链路。","colcon build 通过；启用/禁用节点均无启动错误；默认场景无额外日志噪声。","已完成","已完成","已完成","已提交","","plan/2026-01-08_11-22-40-auto-follow-nearest-bus-50m.md:29;plan/2026-01-08_11-22-40-auto-follow-nearest-bus-50m.md:30;plan/2026-01-08_11-22-40-auto-follow-nearest-bus-50m.md:31;src/launcher/autoware_launch/autoware_launch/launch/planning_simulator.launch.xml:47;src/launcher/autoware_launch/autoware_launch/launch/planning_simulator.launch.xml:102;docs/vehicle_following_scenario_task.md:157","picked_reason:P0 将节点接入 planning_simulator 启动链路以便端到端验证;done_at:2026-01-08;validation_limited:本环境未实际启动 planning_simulator/colcon build 进行 launch 级验证;manual_test:ros2 launch autoware_launch planning_simulator.launch.xml map_path:=... vehicle_model:=... sensor_model:=... enable_auto_follow:=true ahead_distance:=50.0 target_type:=BUS;evidence:planning_simulator.launch.xml 增加 enable_auto_follow/ahead_distance/target_type 并按参数启停 following_goal_publisher 节点；文档补充可复制启动示例;risk:medium 未做 launch 级实机回归"
"AFBUS50M-060","P0","7","both","Planning Simulator 验证自动跟车闭环","在 Planning Simulator 中放置 1 个 Dummy Bus（20km/h），不手动设置 goal，验证自动发布 goal/route、轨迹持续输出与跟车效果。","可复现步骤：放置 Dummy Bus 且不操作“2D Goal Pose”；确认目标入口持续更新；/planning/trajectory 持续输出；obstacle_cruise debug 话题可观测到跟车距离趋于稳定（记录期望阈值/收敛时间）；输出复测命令清单（ros2 topic echo/info）。","AUTOE2E","验证链路完整性（topic/service）；记录地图/车辆/传感器模型与关键参数；尽量用命令行检查减少人工主观判断。","多 Bus/Bus 消失/Bus 到自车后方/弯道等场景下不崩溃且可恢复重选；与基线手动 goal 对比无明显退化（至少轨迹不中断）。","已完成","已完成","已完成","已提交","","plan/2026-01-08_11-22-40-auto-follow-nearest-bus-50m.md:32;plan/2026-01-08_11-22-40-auto-follow-nearest-bus-50m.md:33;plan/2026-01-08_11-22-40-auto-follow-nearest-bus-50m.md:34;docs/vehicle_following_scenario_task.md:152;docs/vehicle_following_scenario_task.md:184;src/launcher/autoware_launch/autoware_launch/launch/planning_simulator.launch.xml:102","picked_reason:P0 补齐端到端可复现验证步骤作为交付闭环证据;done_at:2026-01-08;validation_limited:未在本环境运行 planning_simulator 做端到端现象验收;manual_test:按 docs/vehicle_following_scenario_task.md 的 A0 步骤启动 enable_auto_follow=true 且放置 Dummy Bus（20km/h），确认 /planning/mission_planning/goal 更新、/planning/trajectory 持续输出、planning_info 距离指标收敛;evidence:补充 A0 自动跟随闭环命令清单与取证日志产物建议;risk:medium 端到端行为未在当前环境复核"
"AFBUS50M-070","P2","8","backend","回滚与降级路径固化","提供运行时与代码层面的回滚/降级说明，确保自动模式可快速关闭且不影响现有规划链路。","enable_auto_follow=false 时完全回到手动 goal；节点独立可移除；文档包含回滚步骤与常见故障排查（入口不可用、goal 路外/弯道等）并给出升级建议（lanelet 投影）。","AUTOE2E","feature flag 覆盖所有自动行为；异常场景优先降级为“停止更新/保持上次”而非错误推进；日志可读且带节流。","异常/弯道导致 goal 不可用时可通过参数或升级策略解决且不影响其它模块；回滚后系统无残留配置依赖。","未开始","未开始","未开始","未提交","","plan/2026-01-08_11-22-40-auto-follow-nearest-bus-50m.md:35;plan/2026-01-08_11-22-40-auto-follow-nearest-bus-50m.md:36;plan/2026-01-08_11-22-40-auto-follow-nearest-bus-50m.md:37;plan/2026-01-08_11-22-40-auto-follow-nearest-bus-50m.md:41",""
